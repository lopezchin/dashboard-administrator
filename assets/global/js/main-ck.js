<<<<<<< HEAD
var globalJs={Global:{init:function(){this.dateTimePicker();this.datePickerDOB();this.addAttachments();this.logoutInactive();this.popupLogin();this.priceFormat();this.ajaxComplete();this.closeLoginPopupModalClose();this.pluginNormalization();this.triggerer();this.resetFormControlFeedback()},pluginNormalization:function(){$(document).on("DOMMouseScroll mousewheel scroll",".modal,body",function(){typeof ___t!="undefined"&&window.clearTimeout(___t);___t=window.setTimeout(function(){$(".datetimepicker,.datepicker-dob").datetimepicker("place")},600)})},maskInput:function(){$('input[name$="[landline]"]').mask("99 - 9?999999999999",{placeholder:" "})},alertBox:function(e,t,n){var r,i;if(!$("#defaultModal").length){i='<div class="modal fade" id="defaultModal"  tabindex="-1" role="dialog" aria-labelledby="media" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">  <div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"></h4></div><div class="modal-body"></div><div class="modal-footer"></div></div><!-- /.modal-content --></div><!-- /.modal-dialog --></div><!-- /.modal -->';r=$(i).appendTo($("body"))}else r=$("#defaultModal");typeof n!="undefined"&&n!=""?r.find(".modal-footer").html(n):r.find(".modal-footer").remove();typeof t!="undefined"&&t!=""?r.find(".modal-body").html(t):r.find(".modal-body").remove();typeof e!="undefined"&&e!=""?r.find(".modal-title").html(e):r.find(".modal-title").closest("modal-header").remove();r.modal()},ajaxComplete:function(){var e=this;$(document).ajaxComplete(function(t,n,r){if(n.status==200){if(typeof n.responseJSON!="undefined"){var i=n.responseJSON;typeof i.status!="undefined"&&i.status=="not_logged_in"&&e._showLoginDialog()}}else if(n.status==500){var s="Something is not quite right.",o="<p>We hope to solve it shortly.</p>",u='<a class="btn btn-default pull-left" href="/">Return to homepage.</a>';util.alertBox(s,o,u)}})},_showLoginDialog:function(){var e=this,t=$("#login_popup_modal");t.modal("show")},closeLoginPopupModalClose:function(){$("#login_popup_modal_close").bind("click",function(){$("#login_popup_modal").modal("hide")})},priceFormat:function(e){typeof e=="undefined"&&(e="");var t;typeof e=="object"?t=e.find(".form-group-currency input"):t=$(e+" .form-group-currency input");t.autoNumeric("init",{aSign:"$ ",mDec:0,vMax:99999999})},datePickerDOB:function(){$(".datepicker-dob").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},language:"au",showToday:!0,pickTime:!1,defaultDate:CONST.DOB_START_DATE});$(".datepicker-dob").on("dp.change",function(e){$(this).blur()})},dateTimePicker:function(){$(".datetimepicker").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},language:"au",showToday:!0,pickTime:!1});$(".datetimepicker").on("dp.change",function(e){$(this).blur()});$(".datetimepicker-from").on("dp.change",function(e){$(".datetimepicker-to").data("DateTimePicker").setMinDate(e.date)});$(".datetimepicker-to").on("dp.change",function(e){$(".datetimepicker-from").data("DateTimePicker").setMaxDate(e.date)})},addAttachments:function(){$("body").on("click",".add-more-attachment",function(){var e=$("input.attachment").length-1;$("input.attachment:eq(0)").clone().insertAfter("input.attachment:eq("+e+")")})},logoutInactive:function(){function r(){e<n-6e5&&$.get(CONST.BASEURL+"/session/keep-alive",{},function(e){(typeof e.status=="undefined"||e.status!="success")&&i()})}function s(){clearTimeout(t);e=0;t=setTimeout(o,n)}var e=0,t,n=12e5,i=function(){$("#inactivity_login_popup").modal("show")},o=function(e){$.get(CONST.BASEURL+"/session/destroy",{_token:CONST.TOKEN},function(e){typeof e.status!="undefined"&&e.status=="success"&&i()})};s();setInterval(function(){r()},1e4);setInterval(function(){e+=1e3},1e3);$(document).bind("click mousemove",s)},popupLogin:function(){var e=$("#inactivity_login_popup");e.find("form").jValidator({messageTo:$("#inactivity_form_message"),onSuccess:function(t,n){t.status=="success"&&e.modal("hide")}})},triggerer:function(){$("body").on("click","[data-toggle=trigerrer]",function(e){var t=$(this),n=$($(this).attr("href"));n.trigger("click");e.preventDefault()})},resetFormControlFeedback:function(){var e=$(".form-control-feedback-msg"),t=$(".form-group-left .form-control-feedback-msg");$("body").delegate("input,select,textarea","focus",function(){$formGroup=$(this).closest(".form-group");$feedbackMsg=$formGroup.find(".form-control-feedback-msg");$(".form-control-feedback-msg").hide("fast");$formGroup.hasClass("form-group-left")?$feedbackMsg.css("left",-335).css("left",-($feedbackMsg.width()+35)).fadeIn("fast"):$feedbackMsg.css("right",-335).css("right",-($feedbackMsg.width()+35)).fadeIn("fast")});$("body").delegate("input[type=text],select,textarea,checkbox,radio","blur",function(){$(".form-control-feedback-msg").fadeOut("fast")});$("body").delegate(".form-control-feedback-msg","click",function(){$(this).hide()});$theInputFocused=$("input[type=text],textarea,select,checkbox").filter(":focus");$theInputFocusedFeedbackMsg=$theInputFocused.closest(".form-group").find(".form-control-feedback-msg");$theInputFocusedFeedbackMsg.length&&!$theInputFocusedFeedbackMsg.is(":visible")&&$theInputFocused.focus()}},Overlay:{layOpen:function(e){var t=$(e),n=t.position(),r=n.top,i=n.left,s=t.height(),o=t.width(),u=$('<div class="table-overlay"><span class="table-loader"></span></div>');t.css({position:"relative"});t.append(u);u.css({position:"absolute",background:"rgba(255, 255, 255, 0.74)",top:"0",right:"0",width:o+"px",height:s+"px","z-index":"999"});$(".table-loader").css({"margin-top":s/3+"px","margin-left":"auto","margin-right":"auto"})},layClose:function(){$(".table-overlay").remove()}},Comment:{init:function(){var e=$("#post_id");this.comment();this.getPostComment(e.val())},getPostComment:function(e){globalJs.Overlay.layOpen(".timeline-messages-listing");$.get(baseURL+"post/comment/"+e).done(function(e){$(".timeline-messages").html(e);globalJs.Overlay.layClose()})},comment:function(){$("body").on("click","#send-comment",function(){var e=$("#comment"),t=$("#post_id");if(e.val()=="")return;$.post(baseURL+"post/comment",{comment:e.val(),post_id:t.val()},function(n){globalJs.Comment.getPostComment(t.val());e.val("")})})}},searchUser:function(e,t,n,r,i){function s(e){var t="<table class='user'><tr>";t+="<td class='user-info'><div class='user-title'>"+e.firstname+" "+e.lastname+"</div>";t+="</td></tr></table>";return t}function o(e){selectionCallBack(e);return e.firstname+" "+e.lastname}typeof e=="undefined"&&(e="");typeof n=="undefined"&&(n=!1);typeof selectionCallBack=="undefined"&&(selectionCallBack=function(e){return!1});typeof i=="undefined"&&(i=[]);typeof i=="function"&&(i=i());$(t).select2({placeholder:"Search for an user ..",multiple:n,minimumInputLength:0,allowClear:!0,ajax:{url:CONST.URL+"/g/search-user",dataType:"json",data:function(t,n){var r={q:t,per_page:15,page:n,group_id:e};for(x in i)r[x]=i[x];return r},results:function(e,t){var n=t*15<e.total;return{results:e.users,more:n}}},initSelection:function(e,t){var n=$(e).val();n!==""&&$.ajax(CONST.URL+"/g/search-user",{data:{id:n,method:"init-selection"},dataType:"json"}).done(function(e){t(e)})},formatResult:s,formatSelection:o,escapeMarkup:function(e){return e}})}};
=======
var globalJs={Global:{init:function(){this.dateTimePicker();this.datePicker();this.addAttachments();this.logoutInactive();this.popupLogin();this.priceFormat();this.ajaxComplete();this.closeLoginPopupModalClose();this.pluginNormalization();this.triggerer();this.resetFormControlFeedback()},pluginNormalization:function(){$(document).on("DOMMouseScroll mousewheel scroll",".modal,body",function(){typeof ___t!="undefined"&&window.clearTimeout(___t);___t=window.setTimeout(function(){$(".datetimepicker,.datepicker-dob").datetimepicker("place")},600)})},maskInput:function(){},alertBox:function(e,t,n){var r,i;if(!$("#defaultModal").length){i='<div class="modal fade" id="defaultModal"  tabindex="-1" role="dialog" aria-labelledby="media" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">  <div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"></h4></div><div class="modal-body"></div><div class="modal-footer"></div></div><!-- /.modal-content --></div><!-- /.modal-dialog --></div><!-- /.modal -->';r=$(i).appendTo($("body"))}else r=$("#defaultModal");typeof n!="undefined"&&n!=""?r.find(".modal-footer").html(n):r.find(".modal-footer").remove();typeof t!="undefined"&&t!=""?r.find(".modal-body").html(t):r.find(".modal-body").remove();typeof e!="undefined"&&e!=""?r.find(".modal-title").html(e):r.find(".modal-title").closest("modal-header").remove();r.modal()},ajaxComplete:function(){var e=this;$(document).ajaxComplete(function(t,n,r){if(n.status==200){if(typeof n.responseJSON!="undefined"){var i=n.responseJSON;typeof i.status!="undefined"&&i.status=="not_logged_in"&&e._showLoginDialog()}}else if(n.status==500){var s="Something is not quite right.",o="<p>We hope to solve it shortly.</p>",u='<a class="btn btn-default pull-left" href="/">Return to homepage.</a>';util.alertBox(s,o,u)}})},_showLoginDialog:function(){var e=this,t=$("#login_popup_modal");t.modal("show")},closeLoginPopupModalClose:function(){$("#login_popup_modal_close").bind("click",function(){$("#login_popup_modal").modal("hide")})},priceFormat:function(e){typeof e=="undefined"&&(e="");var t;typeof e=="object"?t=e.find(".form-group-currency input"):t=$(e+" .form-group-currency input");t.autoNumeric("init",{aSign:"$ ",mDec:0,vMax:99999999})},datePicker:function(){$(".datepicker-dob").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},language:"au",showToday:!0,pickTime:!1,defaultDate:CONST.DOB_START_DATE});$(".datepicker-dob").on("dp.change",function(e){$(this).blur()})},dateTimePicker:function(){$(".datetimepicker").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},language:"au",showToday:!0,pickTime:!1});$(".datetimepicker").on("dp.change",function(e){$(this).blur()});$(".datetimepicker-from").on("dp.change",function(e){$(".datetimepicker-to").data("DateTimePicker").setMinDate(e.date)});$(".datetimepicker-to").on("dp.change",function(e){$(".datetimepicker-from").data("DateTimePicker").setMaxDate(e.date)})},addAttachments:function(){$("body").on("click",".add-more-attachment",function(){var e=$("input.attachment").length-1;$("input.attachment:eq(0)").clone().insertAfter("input.attachment:eq("+e+")")})},logoutInactive:function(){function r(){e<n-6e5&&$.get(CONST.BASEURL+"/session/keep-alive",{},function(e){(typeof e.status=="undefined"||e.status!="success")&&i()})}function s(){clearTimeout(t);e=0;t=setTimeout(o,n)}var e=0,t,n=12e5,i=function(){$("#inactivity_login_popup").modal("show")},o=function(e){$.get(CONST.BASEURL+"/session/destroy",{_token:CONST.TOKEN},function(e){typeof e.status!="undefined"&&e.status=="success"&&i()})};s();setInterval(function(){r()},1e4);setInterval(function(){e+=1e3},1e3);$(document).bind("click mousemove",s)},popupLogin:function(){var e=$("#inactivity_login_popup");e.find("form").jValidator({messageTo:$("#inactivity_form_message"),onSuccess:function(t,n){t.status=="success"&&e.modal("hide")}})},triggerer:function(){$("body").on("click","[data-toggle=trigerrer]",function(e){var t=$(this),n=$($(this).attr("href"));n.trigger("click");e.preventDefault()})},resetFormControlFeedback:function(){var e=$(".form-control-feedback-msg"),t=$(".form-group-left .form-control-feedback-msg");$("body").delegate("input,select,textarea","focus",function(){$formGroup=$(this).closest(".form-group");$feedbackMsg=$formGroup.find(".form-control-feedback-msg");$(".form-control-feedback-msg").hide("fast");$formGroup.hasClass("form-group-left")?$feedbackMsg.css("left",-335).css("left",-($feedbackMsg.width()+35)).fadeIn("fast"):$feedbackMsg.css("right",-335).css("right",-($feedbackMsg.width()+35)).fadeIn("fast")});$("body").delegate("input[type=text],select,textarea,checkbox,radio","blur",function(){$(".form-control-feedback-msg").fadeOut("fast")});$("body").delegate(".form-control-feedback-msg","click",function(){$(this).hide()});$theInputFocused=$("input[type=text],textarea,select,checkbox").filter(":focus");$theInputFocusedFeedbackMsg=$theInputFocused.closest(".form-group").find(".form-control-feedback-msg");$theInputFocusedFeedbackMsg.length&&!$theInputFocusedFeedbackMsg.is(":visible")&&$theInputFocused.focus()}},Overlay:{layOpen:function(e){var t=$(e),n=t.position(),r=n.top,i=n.left,s=t.height(),o=t.width(),u=$('<div class="table-overlay"><span class="table-loader"></span></div>');t.css({position:"relative"});t.append(u);u.css({position:"absolute",background:"rgba(255, 255, 255, 0.74)",top:"0",right:"0",width:o+"px",height:s+"px","z-index":"999"});$(".table-loader").css({"margin-top":s/3+"px","margin-left":"auto","margin-right":"auto"})},layClose:function(){$(".table-overlay").remove()}},Comment:{init:function(){var e=$("#post_id");this.comment();this.getPostComment(e.val())},getPostComment:function(e){globalJs.Overlay.layOpen(".timeline-messages-listing");$.get(baseURL+"post/comment/"+e).done(function(e){$(".timeline-messages").html(e);globalJs.Overlay.layClose()})},comment:function(){$("body").on("click","#send-comment",function(){var e=$("#comment"),t=$("#post_id");if(e.val()=="")return;$.post(baseURL+"post/comment",{comment:e.val(),post_id:t.val()},function(n){globalJs.Comment.getPostComment(t.val());e.val("")})})}},searchUser:function(e,t,n,r,i){function s(e){var t="<table class='user'><tr>";t+="<td class='user-info'><div class='user-title'>"+e.firstname+" "+e.lastname+"</div>";t+="</td></tr></table>";return t}function o(e){selectionCallBack(e);return e.firstname+" "+e.lastname}typeof e=="undefined"&&(e="");typeof n=="undefined"&&(n=!1);typeof selectionCallBack=="undefined"&&(selectionCallBack=function(e){return!1});typeof i=="undefined"&&(i=[]);typeof i=="function"&&(i=i());$(t).select2({placeholder:"Search for an user ..",multiple:n,minimumInputLength:0,allowClear:!0,ajax:{url:CONST.URL+"/g/search-user",dataType:"json",data:function(t,n){var r={q:t,per_page:15,page:n,group_id:e};for(x in i)r[x]=i[x];return r},results:function(e,t){var n=t*15<e.total;return{results:e.users,more:n}}},initSelection:function(e,t){var n=$(e).val();n!==""&&$.ajax(CONST.URL+"/g/search-user",{data:{id:n,method:"init-selection"},dataType:"json"}).done(function(e){t(e)})},formatResult:s,formatSelection:o,escapeMarkup:function(e){return e}})}};
>>>>>>> FETCH_HEAD
