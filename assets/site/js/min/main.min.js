var gy={Global:{init:function(){this.searchstopPropagation(),this.carousel(),this.signupBtn(),$(".tooltip2").tooltip();var a=$(".selectpicker--no-result");0!=a.length&&a.select2({minimumResultsForSearch:-1});var e=$(".selectpicker--country");0!=e.length&&e.select2({allowClear:!0,placeholder:"- Select Country -"})},signupBtn:function(){$(".btn-signup").click(function(){$("#signup-form").addClass("active"),$(".signup-form-overlay").removeClass("hide"),$("body").addClass("signup-body")}),$(".navbar-direction").click(function(){$("#signup-form").removeClass("active"),$(".signup-form-overlay").add("hide"),$("body").removeClass("signup-body")})},searchstopPropagation:function(){$(".search--pretty .form-control").on("click",function(){$(this).addClass("form-control--pushed");var a=$(this);$(".profile").one("mouseup",function(){return!1}),$(document).one("mouseup",function(){a.removeClass("form-control--pushed")})})},carousel:function(){$(".carousel").carousel()}},bootrapModal:{modal:function(a){$(".bootbox").modal("hide");var e=$("#modal");e.removeClass("pre_loader"),e.removeClass("modal--skin-dark--2nd"),e.find(".modal-content").html(a),e.modal()},alertModal:function(a,e,t){var r=$("#modal");r.removeClass("pre_loader"),r.find(".modal-header").html(a),r.find(".modal-body").html(e),r.find(".modal-footer").html(t),r.modal()}},Cart:{init:function(){this.buyNow(),this.addToCart(),this.removeCart(),this.updateCart(),this.BadgeCart(),this.removeBadgeCart()},alertMsg:function(a,e){var t="";t=a?"success":"danger";var r='<span class="label label-'+t+' pull-right" style="margin-right:5%;">'+e+"</span>";return r},loader:function(a){bootbox.dialog({message:"<span class='spinner'></span>"+a}),$(".modal").addClass("modal--skin-dark--2nd"),$(".bootbox-close-button").hide()},addToCart:function(){$("body").on("click",".addToCart",function(a){a.preventDefault();var e=$(this),t=$("#cart-form"),r=e.data("product-code");return e.data("posttype"),t.find(':input[name^="productCode"]').val(r),$.ajax({url:baseURL+"cart/add",data:t.serialize(),type:"post",dataType:"json",beforeSend:function(){gy.Cart.loader("Please wait...")},success:function(a){if("guest"==a.error)$("a#loginModal").trigger("click");else{var e=gy.Cart.getCart();gy.bootrapModal.modal(e),$("#myModalLabel").before(gy.Cart.alertMsg(a.status,a.message))}}}),$(".nav-cart .badge").text(gy.Cart.getTotalCartItems()),!1})},buyNow:function(){$("#addToCartForm").submit(function(a){a.preventDefault();var e=$(this),t=e.attr("action");return $.ajax({url:t,type:"post",data:e.serialize(),dataType:"json",async:!1,beforeSend:function(){},success:function(a){if("guest"==a.error)$("a#loginModal").trigger("click");else if(a.status){var t=e.find(".buynow");t.find(".fa").remove(),t.prepend('<i class="fa fa-check mr-5px"></i>'),t.find(".fa").delay(2e3).fadeOut();var r=gy.Cart.getCart();gy.bootrapModal.modal(r)}else bootbox.alert(a.message)}}),$(".nav-cart .badge").text(gy.Cart.getTotalCartItems()),!1})},updateCart:function(){$("body").on("submit","#cartForm",function(a){a.preventDefault();var e=$(this);return $.ajax({url:baseURL+"cart/update",type:"post",data:e.serialize(),dataType:"json",async:!1,beforeSend:function(){gyMain.Loader.layOpen(".modal-body")},success:function(a){var e=gy.Cart.getCart();gy.bootrapModal.modal(e),$.each(a,function(a,e){$("#myModalLabel").before(gy.Cart.alertMsg(e.status,e.message))}),gyMain.Loader.layClose()},error:function(a,e,t){console.log(a),console.log(e),console.log(t)}}),$(".nav-cart .badge").text(gy.Cart.getTotalCartItems()),!1})},removeCart:function(){$("body").on("click",".remove-cart",function(a){a.preventDefault();var e=$(this),t=e.data("product-code");return gyMain.Loader.layOpen(".modal-body"),$.get(baseURL+"cart/remove",{productCode:t},function(){var a=gy.Cart.getCart();gy.bootrapModal.modal(a),gyMain.Loader.layClose()}),!1})},getCart:function(){var a="";return $.ajax({url:baseURL+"ajax/cart",type:"get",dataType:"html",async:!1,beforeSend:function(){},success:function(e){a=e,$("#modal").addClass("modal--md").removeClass(".modal--skin-dark--2nd")}}),a},getTotalCartItems:function(){var a=0;return $.ajax({url:baseURL+"ajax/total-cart-item",type:"get",async:!1,success:function(e){a=e}}),a},removeBadgeCart:function(){$("body").on("click",".remove-badge-cart",function(a){a.preventDefault();var e=$(this),t=e.data("product-code");return gyMain.Loader.layOpen(".nav-cart > ul"),$.get(baseURL+"cart/remove",{productCode:t},function(){$(".nav-cart .badge").text(gy.Cart.getTotalCartItems());var a=$(".nav-cart > ul");a.html(gy.Cart.getBadgeCart()),gyMain.Loader.layClose()}),!1})},BadgeCart:function(){$(this);var a=$(".nav-cart > ul");$(".nav-cart").on("shown.bs.dropdown",function(){gyMain.Loader.layClose(),gyMain.Loader.layOpen(".nav-cart > ul"),setTimeout(function(){a.html(gy.Cart.getBadgeCart())},100)})},getBadgeCart:function(){var a="";return $.ajax({url:baseURL+"ajax/badge-cart",type:"get",async:!1,beforeSend:function(){},success:function(e){a=e}}),a}},User:{init:function(){this.loginForm(),this.shareForm()},loginForm:function(){$("body").on("click","a#loginModal",function(a){a.preventDefault(),$("#modal").removeClass("modal--md");var e=$(this);return e.data("post-id"),$.get(baseURL+"ajax/login").done(function(a){"auth"==a||($("#modal").addClass("form-login"),gy.bootrapModal.modal(a))}),!1})},shareForm:function(){$("body").on("click","#share",function(){var a=$(this),e=a.data("post-id");$.ajax({type:"get",url:baseURL+"ajax/share",data:{post_id:e},beforeSend:function(){gy.Cart.loader("Please wait...")},success:function(a){try{var e=JSON.parse(a);"guest"==e.error?$("a#loginModal").trigger("click"):gy.bootrapModal.modal(a)}catch(t){gy.bootrapModal.modal(a)}}})})},share:function(){$("#share-form").submit(function(a){a.preventDefault();var e=$(this),t=e.attr("action"),r=e.find(':input[name^="email"]'),o=e.find(':input[name^="message"]'),n=$(".bootstrap-tagsinput input");return""==r.val()&&""==n?(e.find(".msg-wrapper").html('<p class="text-danger">No email entered, Please hit enter to email field to add the email.</p>'),void 0):($.ajax({url:t,type:"post",dataType:"json",data:e.serialize()+"&tagsinput="+n.val(),async:!1,beforeSend:function(){},success:function(a){"success"==a.status?(r.val(""),r.tagsinput("removeAll"),o.val(""),n.val(""),e.find(".msg-wrapper").html('<p class="text-success">Successfully sent.</p>')):"failed"==a.status?e.find(".msg-wrapper").html('<p class="text-danger">Error: Please check the feilds. <br />'+a.errors+"</p>"):""!=a.error?"guest"==a.error?window.location.href=baseURL+"login":e.find(".msg-wrapper").html('<p class="text-danger">'+a.error+"</p>"):e.find(".msg-wrapper").html('<p class="text-danger">Error: Email might be exists/registered.</p>')}}),!1)}),$('input[name^="email"]').tagsinput({confirmKeys:[13,44],tagClass:function(a){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(a)?"label label-info":"label label-danger"}})},signup:function(){$("#signupForm").submit(function(a){a.preventDefault();var e=$(this),t=e.attr("action");return $.ajax({url:t,type:"post",data:e.serialize(),dataType:"json",beforeSend:function(){},success:function(a){if(a.errors){e.find(".msg-wrapper").html("");var t=a.errors;$.each(t,function(a,e){if(0!=e.length){var t=$(":input[name^='"+a+"']").closest(".form-group");t.addClass("has-error"),t.find(".control-label").text(e)}})}else"success"==a.status&&(window.location.href=baseURL+"thankyou")}}),!1})},login:function(){$("#loginForm").submit(function(a){a.preventDefault();var e=$(this),t=e.serialize(),r=e.attr("action");return $.ajax({url:r,type:"post",data:t,dataType:"json",beforeSend:function(){$("#modal").removeClass("modal--md")},success:function(a){if("success"==a.status)location.reload();else if(""!=a.errors)if("object"==typeof a.errors){var t=a.errors;$.each(t,function(a,e){if(0!=e.length){var t=$(":input[name^='"+a+"']").closest(".form-group");t.addClass("has-error")}})}else e.find(".msg-wrapper").html('<p class="text-danger">'+a.errors+"</p>")}}),!1})}},DealsPage:{init:function(){},oDateCounter:function(){$("#box-counter").countdown({until:new Date(2013,11,25),format:"HMS"}),$(".object__counter").countdown({until:new Date(2013,11,25),format:"HMS"})}}};